> https://www.bilibili.com/video/BV1sk4y1M7ru/ ã€Š7å¤©å­¦JAVAã€‹
>
> https://learn.lianglianglee.com/%E4%B8%93%E6%A0%8F/Java%20%E4%B8%9A%E5%8A%A1%E5%BC%80%E5%8F%91%E5%B8%B8%E8%A7%81%E9%94%99%E8%AF%AF%20100%20%E4%BE%8B ã€ŠJava ä¸šåŠ¡å¼€å‘å¸¸è§é”™è¯¯ 100 ä¾‹ã€‹
>
> https://learn.lianglianglee.com/%E4%B8%93%E6%A0%8F/Spring%E7%BC%96%E7%A8%8B%E5%B8%B8%E8%A7%81%E9%94%99%E8%AF%AF50%E4%BE%8Bã€ŠSpringç¼–ç¨‹å¸¸è§é”™è¯¯50ä¾‹ã€‹

# å¦‚ä½•è®¾è®¡ä¸€ä¸ªçŸ­ä¿¡éªŒè¯ç ç™»å½•åŠŸèƒ½ï¼Ÿ

> è€ƒå¯Ÿçš„æ˜¯ç½‘ç»œå®‰å…¨

- **ã€æ‰‹æœºå·éæ³¨å†Œç”¨æˆ·æ€ä¹ˆå¤„ç†ï¼Ÿã€‘**

  ä¸èƒ½æç¤ºæœ‰æ²¡æœ‰æ³¨å†Œï¼Œæç¤ºä¸€å®šè¦æ¨¡ç³Šï¼Œé˜²æ­¢å—…æ¢
  
- **ã€éªŒè¯ç å­˜å“ªé‡Œï¼Ÿã€‘**

  å­˜ã€redisã€‘ï¼ˆæœ‰è‡ªåŠ¨è¿‡æœŸæ—¶é—´ï¼‰{key æ‰‹æœºå·ï¼š value éªŒè¯ç }ä¸€æ¬¡æ€§æ•°æ®ä¸€èˆ¬éƒ½ç”¨ redis å­˜
  
- **ã€æ¬¡æ•°é™åˆ¶ã€‘**ï¼šåªé™åˆ¶æ‰‹æœºå·å¤Ÿäº†å—ï¼Ÿ

  è¿˜è¦é™åˆ¶ ip
  
- **ã€æéªŒã€‘æ˜¯ä¸æ˜¯ä¸€å®šå®‰å…¨ï¼Ÿ**

  å•é æéªŒä¸å®‰å…¨ï¼Œå› ä¸ºæœ‰é»‘äº§æœåŠ¡
  
- **ã€å…ˆä¿å­˜éªŒè¯ç è¿˜æ˜¯å…ˆå‘çŸ­æ¯ï¼Ÿã€‘**

  ä¸€å®šè¦å…ˆå­˜éªŒè¯ç ï¼Œå› ä¸ºçŸ­ä¿¡æ˜¯ã€å¼‚æ­¥å›è°ƒã€‘çš„ï¼Œä¹Ÿä¸çŸ¥é“å‘é€åˆ°ç”¨æˆ·ä¸Šæ˜¯å¤±è´¥è¿˜æ˜¯æˆåŠŸï¼Œ
  è¦é»˜è®¤å…¨éƒ¨å‘é€æˆåŠŸï¼Œå¦‚æœç”¨æˆ·å›å¡«äº†æ­£ç¡®çš„éªŒè¯ç é‚£å°±ä¸€å®šæ˜¯æ”¶åˆ°äº†ï¼›å¦‚æœå¤±è´¥äº†ç”¨æˆ·ä¼šå†è¯·æ±‚çš„ã€‚

- âœï¸ **è¯¾å¤–é¢˜ï¼šå¦‚ä½•å‡†ç¡®é™åˆ¶ã€æ¬¡æ•°ã€‘ï¼Ÿ(è€ƒå¯Ÿã€å¼‚æ­¥ã€‘å’Œã€å¹¶å‘ã€‘)**

  é¦–å…ˆã€è®¡æ•°å™¨ã€‘è¦ç”¨ redis çš„è‡ªå¢å·¥å…·åº“ï¼š

  1. å…ˆå–ï¼ˆå¼‚æ­¥ï¼‰æ¬¡æ•°å†åˆ¤æ–­çš„è¯ï¼Œä¼šå‡ºç°å–çš„è¿‡ç¨‹ä¸­ç”¨æˆ·åˆå‘é€äº†ä¸€æ¬¡ï¼ˆå¹¶å‘ï¼‰ï¼Œè¿™æ—¶ç¬¬äºŒæ¬¡å–çš„æ¬¡æ•°å°±æ²¡æ›´æ–°å¯¹é½
  2. æ‰€ä»¥è¦å…ˆ â•1 ï¼Œæ˜¯å¯ä»¥ç›´æ¥å¾—åˆ° â•1 åçš„è¿”å›å€¼ï¼Œå†æ¥åˆ¤æ–­æ˜¯å¦æœ‰è¶…
  3. ä¸ä½¿ç”¨ã€åŠ é”ã€‘ï¼Œè¿‡åº¦è®¾è®¡

# ç›¸å…³æœ¯è¯­

## é˜²æ­¢å—…æ¢

å°†é—®é¢˜æ¼”å˜æˆã€Šè®¾è®¡ä¸€ä¸ªç”¨æˆ·é€šè¿‡éªŒè¯ç ç»‘å®šæ‰‹æœºå·çš„åŠŸèƒ½ï¼Ÿã€‹

1. ã€æ‰‹æœºå·å·²ç»‘å®šäº†æ€ä¹ˆå¤„ç†ï¼Ÿã€‘ ä¸ç®¡æœ‰æ²¡æœ‰å·²ç»‘å®šï¼Œåªæœ‰ç­‰åˆ°{ k:æ‰‹æœºå·+userId, v:éªŒè¯ç } å…¨é€šè¿‡äº†æ‰å‘Šè¯‰ç”¨æˆ·æ˜¯å¦å·²ç»‘å®š
2. ã€éªŒè¯ç å­˜å“ªé‡Œï¼Ÿã€‘ redis çš„ k ä¸èƒ½å†æ˜¯å•ä¸€çš„ **æ‰‹æœºå·**ï¼Œå› ä¸ºå…¶ä»–ç”¨æˆ·ä¹Ÿèƒ½è¾“å…¥ç›¸åŒæ‰‹æœºå·ï¼Œé€ æˆæ··ä¹±ã€‚k è¦æ”¹ä¸º **{ æ‰‹æœºå·+userId }**

## æéªŒ

å›¾å½¢éªŒè¯ç ä¹‹ç±»çš„ç»¼åˆæœåŠ¡

## ç­‰ä¿

ä»¥ä¸Šæ‰€æœ‰å®‰å…¨æ“ä½œéƒ½æ˜¯ç­‰ä¿ï¼ˆç½‘ç»œå®‰å…¨ç­‰çº§ï¼‰è§„å®šå¿…é¡»è¦åšåˆ°çš„

## ç¼“å­˜ç©¿é€

> æŒ‡è¯·æ±‚çš„æ•°æ®ä¸å­˜åœ¨äºç¼“å­˜ä¸­ï¼Œå¯¼è‡´æ¯æ¬¡è¯·æ±‚éƒ½éœ€è¦ç›´æ¥è®¿é—®æ•°æ®åº“ï¼Œ
> è¿›è€Œä½¿æ•°æ®åº“å‹åŠ›å¢å¤§ï¼Œç”šè‡³å¯èƒ½è¢«æ¶æ„æ”»å‡»æ‹–å®



| é—®é¢˜     | å®šä¹‰                                                         | è§£å†³æ–¹æ¡ˆ                                                     | åº“/æ¡†æ¶                                                      |
| -------- | ------------------------------------------------------------ | ------------------------------------------------------------ | ------------------------------------------------------------ |
| ç¼“å­˜ç©¿é€ | è¯·æ±‚çš„æ•°æ®åœ¨ç¼“å­˜å’Œæ•°æ®åº“ä¸­éƒ½ ä¸å­˜åœ¨ï¼Œå¯¼è‡´æ¯æ¬¡è¯·æ±‚éƒ½è½åœ¨æ•°æ®åº“ã€‚ | **ç¼“å­˜æ§åˆ¶**(æŸ¥è¯¢ç»“æœä¸ºç©ºæ—¶ï¼Œä¹Ÿè¦ç¼“å­˜èµ·æ¥)ã€<br />**å‚æ•°æ ¡éªŒ**ã€**å¸ƒéš†è¿‡æ»¤å™¨**ã€<br />**é™æµ** | **Google Guava** å¸ƒéš†è¿‡æ»¤å™¨                                  |
| ç¼“å­˜å‡»ç©¿ | ç¼“å­˜ä¸­æŸäº› çƒ­ç‚¹æ•°æ® å¤±æ•ˆï¼ŒçŸ­æ—¶é—´å†…å¤§é‡è¯·æ±‚åŒæ—¶æŸ¥è¯¢æ•°æ®åº“ã€‚   | è®¾ç½® **çƒ­ç‚¹æ•°æ®** ç”¨ä¸è¿‡æœŸã€ä½¿ç”¨äº’æ–¥é”æˆ–åˆ†å¸ƒå¼é”é¿å…å¹¶å‘æŸ¥è¯¢ | **Caffeine** é€‚åˆçƒ­ç‚¹æ•°æ®å’Œç©ºå€¼ç¼“å­˜ **Redisson** åˆ†å¸ƒå¼redisç¯å¢ƒ |
| ç¼“å­˜é›ªå´© | ç¼“å­˜ä¸­å¤§é‡æ•°æ®åŒæ—¶å¤±æ•ˆï¼Œå¯¼è‡´æ‰€æœ‰è¯·æ±‚éƒ½ç›´æ¥è½åˆ°æ•°æ®åº“ï¼Œå¯èƒ½å¼•å‘æ•°æ®åº“å´©æºƒã€‚ | ç¼“å­˜å¤±æ•ˆæ—¶é—´åˆ†æ•£è®¾ç½®ã€é¢„çƒ­ç¼“å­˜ã€ä½¿ç”¨å¤šçº§ç¼“å­˜æ¶æ„             | **Spring Cache** çµæ´»é›†æˆå¤šç§ç¼“å­˜å®ç°                        |



## å¹‚ç­‰æ€§è®¾è®¡

> æŒ‡å¤šæ¬¡æ‰§è¡ŒåŒä¸€ä¸ªæ“ä½œï¼Œç»“æœæ˜¯ä¸€æ ·çš„ï¼Œä¸ä¼šäº§ç”Ÿä¸å¿…è¦çš„å‰¯ä½œç”¨ã€‚
> æ¥å£è¶…æ—¶åçš„è¯·æ±‚é‡è¯•æ˜¯ä¸€ä¸ªä¸é”™çš„é€‰æ‹©ï¼Œä½†éœ€è¦è€ƒè™‘æœåŠ¡å™¨ç«¯å£çš„å¹‚ç­‰æ€§è®¾è®¡æ˜¯å¦å…è®¸æˆ‘ä»¬é‡è¯•ã€‚
>
> **Spring Cacheï¼ˆç¼“å­˜ï¼‰ã€Redissonï¼ˆåˆ†å¸ƒå¼é”ï¼‰ å’Œ Spring Retryï¼ˆé‡è¯•æœºåˆ¶ï¼‰**

å®ç°æ–¹å¼ï¼š

1. **ä½¿ç”¨å¹‚ç­‰æ€§Keyè¿›è¡Œå»é‡**
   åœ¨å®¢æˆ·ç«¯ç”Ÿæˆä¸€ä¸ªå”¯ä¸€çš„è¯·æ±‚IDä½œä¸ºæ¯æ¬¡è¯·æ±‚æ—¶å»é‡æ ‡çš„

   ```java
   @RequestMapping("/createOrder")
   public String createOrder(@RequestBody OrderRequest request) {
       return orderService.createOrder(request.getOrderId(), request.getUserId());
   }
   ```

2. **åœ¨æ•°æ®åº“ä¸­è®¾ç½®å”¯ä¸€çº¦æŸï¼ˆTransaction IDï¼‰ï¼Œç¡®ä¿é‡å¤è¯·æ±‚ä¸ä¼šäº§ç”Ÿé‡å¤æ•°æ®ã€‚**
   å¦‚UUIDã€è®¢å•ç¼–å·

   ```java
   @Entity
   public class Payment {
       @Id
       @GeneratedValue(strategy = GenerationType.IDENTITY)
       private Long id;
   
       @Column(unique = true)  // Ensure unique constraint on transactionId
       private String transactionId;
   
       private String status;
   
       // other fields, getters, setters
   }
   ```

3. **ä½¿ç”¨AOPè‡ªåŠ¨å¤„ç†å¹‚ç­‰æ€§æ£€æŸ¥**
   @Aspectä¸­é—´ä»¶

   ```java
   @Aspect
   @Component
   public class IdempotencyAspect {
   
       @Autowired
       private RedisCacheService redisCacheService;
   
       @Around("@annotation(Idempotent)")
       public Object handleIdempotency(ProceedingJoinPoint joinPoint) throws Throwable {
           Object[] args = joinPoint.getArgs();
           String requestId = (String) args[0];  // Assume the first argument is the request ID
   
           // Check if request is already processed
           if (redisCacheService.isRequestProcessed(requestId)) {
               return "Request already processed";
           }
   
           // Proceed with the original method
           Object result = joinPoint.proceed();
   
           // Cache the result to prevent future retries
           redisCacheService.cacheRequest(requestId, result);
   
           return result;
       }
   }
   ```

4. **åœ¨HTTPåè®®å±‚é¢åˆ©ç”¨å¹‚ç­‰çš„HTTPæ–¹æ³•ï¼ˆå¦‚GETå’ŒPUTï¼‰ä¿è¯å¹‚ç­‰æ€§ã€‚**
   GETåªå–ã€PUTé‡å¤å­˜ä¹Ÿæ˜¯ç»“æœä¸€æ ·ã€‚

## åŸå­æ€§

ä¿è¯ä¸ä¼šå‡ºç°éƒ¨åˆ†æ‰§è¡Œçš„çŠ¶æ€ã€‚

## åˆ†å¸ƒå¼é”

å…ˆæŸ¥è¯¢å†ä¿å­˜ä¸šåŠ¡ä¸­ï¼Œåœ¨å¹¶å‘åœºæ™¯ä¸‹ï¼Œå¯èƒ½ä¸¤ä¸ªçº¿ç¨‹éƒ½æŸ¥ä¸åˆ°æ•°æ®ï¼Œç„¶åéƒ½å»ä¿å­˜äº†ã€‚

----



## Spring Cloud + Feign

## Spring Boot + Apache HttpClient

# çº¿ç¨‹

# é”

## synchronized å…³é”®å­—

**ç±»ä¼¼jsçš„`async/await`ï¼Œæ˜¯javaé‡Œçš„çº¿ç¨‹åŒæ­¥æœºåˆ¶ï¼Œé€‚ç”¨äºéœ€è¦ä¿è¯å¤šçº¿ç¨‹è®¿é—®å…±äº«èµ„æºå®‰å…¨çš„åœºæ™¯**

```java
Object lock = new Object();
 
synchronized (lock) {
  ...
}
```

ç¼ºç‚¹æ˜¯**éå…¬å¹³é”**ï¼Œçº¿ç¨‹ç«äº‰å¯èƒ½å¯¼è‡´æŸäº›çº¿ç¨‹â€œé¥¥é¥¿â€

## java.util.concurrent.ReentrantLock å…¬å¹³é”

```java
Lock lock = new ReentrantLock();

lock.lock(); // é”ä¸Š
lock.unlock(); // è§£é”
```

é”ä¼šå¢åŠ ä»£ç å¤æ‚æ€§ã€‚

## ConcurrentHashMap

ConcurrentHashMapæ˜¯ä¸€ä¸ªé«˜æ€§èƒ½çš„çº¿ç¨‹å®‰å…¨çš„å“ˆå¸Œè¡¨å®¹å™¨ï¼Œ
è¿™é‡Œçš„â€œ**çº¿ç¨‹å®‰å…¨**â€åªèƒ½ä¿è¯æä¾›çš„**åŸå­æ€§å†™è¯»æ“ä½œæ˜¯çº¿ç¨‹å®‰å…¨çš„**ã€‚

## Collections.synchronizedXXX

å°†XXXå°è£…æˆçº¿ç¨‹å®‰å…¨çš„XXX
å¦‚ï¼š`Collections.synchronizedMap`

```java
Map<Interger, String> map = Collections.synchronizedMap(new HashMap<>());

// å¼€çº¿ç¨‹1
Thread thread1 = new Thread(() -> {
	for (int i = 0; i < 1000; i++) {
    map.put(i, "Value " + i);
  }
})
  
  // å¼€çº¿ç¨‹2
Thread thread1 = new Thread(() -> {
	for (int i = 1000; i < 2000; i++) {
    map.put(i, "Value " + i);
  }
})
  
// å¯åŠ¨çº¿ç¨‹
thread1.start();
thread2.start();

// ç­‰å¾…ä¸¤ä¸ªçº¿ç¨‹æ‰§è¡Œå®Œ
thread1.join();
thread2.join();

// æ‰“å°Mapçš„å¤§å°
System.out.println("Map size: " + map.size());
```

# è¿æ¥æ± 



# Java Spring â¬‡ï¸

# XML

å¯æ‹“å±•æ ‡è®°è¯­è¨€ã€‚æ˜¯ä¸ä½œä¸ºçš„ï¼Œä»…ç”¨æ¥ç»“æ„åŒ–ã€å­˜å‚¨ä»¥åŠä¼ è¾“ä¿¡æ¯çš„çº¯æ–‡æœ¬ã€‚
æ¢è¨€ä¹‹ï¼ŒåŒ`.json`æ–‡ä»¶ä½œç”¨ã€‚

```xml
<?xml version="1.0" encoding="utf-8"?>
```

## XML è§£æ

ç”¨ `org.dom4j.io.SAXReader`æ¥è§£æ https://dom4j.github.io/

# JDBC

## Javaæ•°æ®åº“è¿æ¥è§„èŒƒ

Java DataBase Connectivity - Javaæ•°æ®åº“è¿æ¥ è§„èŒƒï¼ŒJavaç¨‹åº å’Œ æ•°æ®åº“ è¿æ¥ä¸­é—´çš„æ¡¥æ¢

1. åŠ è½½ Drivder é©±åŠ¨

   > mysql-connector-java-8.0.11.jar  https://mvnrepository.com/artifact/mysql/mysql-connector-java

2. è·å– æ•°æ®åº“ è¿æ¥ï¼ˆConnectionï¼‰

3. åˆ›å»ºä¼šè¯ - SQLå‘½ä»¤å‘é€å™¨ï¼ˆStatementï¼‰

4. é€šè¿‡Statementå‘é€SQLå‘½ä»¤å¾—åˆ°ç»“æœ

5. å¤„ç†ç»“æœ

6. å…³é—­æ•°æ®åº“èµ„æºï¼ˆResultSetã€Statementã€Connectionï¼‰

```java
import java.sql.Connection;
import java.sql.DriverManager;
import java.sql.SQLException;
import java.sql.Statement;

public class Main {
    public static void main(String[] args) throws SQLException, ClassNotFoundException {
        // åŠ è½½é©±åŠ¨
        Class.forName("com.mysql.cj.jdbc.Driver");

        // è·å–è¿æ¥
        String url = "jdbc:mysql://127.0.0.1:3306/msb?useSSL=false&useUnicode=true&characterEncoding=UTF-8";
        String username = "root";
        String password = "123456";
        Connection conn = DriverManager.getConnection(url,username,password);

        // åˆ›å»ºä¼šè¯
        Statement statement = conn.createStatement();
        // å‘é€SQL
        int i = statement.executeUpdate("insert  into t_book (id) values (3)");
        // å¤„ç†ç»“æœ
        if(i > 0){
            // ...
        }

        // å…³é—­èµ„æº
        statement.close();
        conn.close();
    }
}
```

# Maven

> ç±»ä¼¼ npm ç¬¬ä¸‰æ–¹åŒ…é›†ä¸­ç®¡ç†å·¥å…·

Mavenæ˜¯ä½¿ç”¨Javaè¯­è¨€ç¼–å†™çš„åŸºäº**é¡¹ç›®å¯¹è±¡æ¨¡å‹**ï¼ˆ**POM**ï¼‰é¡¹ç›®ç®¡ç†å·¥å…·è½¯ä»¶ã€‚
å¼€å‘è€…å¯ä»¥é€šè¿‡ä¸€å°æ®µæè¿°ä¿¡æ¯æ¥ç®¡ç†é¡¹ç›®æ„å»ºã€æŠ¥å‘Šå’Œæ–‡æ¡£ã€‚

1. ä¸­å¤®ä»“åº“ï¼š https://mvnrepository.com/
2. æœ¬åœ°ä»“åº“
3. é•œåƒä»“åº“

## åæ ‡

åæ ‡ï¼ˆåœ¨å‰ç«¯ä¸­å«åŒ…ï¼‰å‘½åè§„èŒƒï¼š

 `<groupId>`ï¼ˆå…¬å¸åŸŸåçš„é€†å‘å†™æ³•ï¼‰ + `<artifactId>`ï¼ˆjaråŒ…åï¼‰+ `<version>` + `<packaging>`ï¼ˆæ‰“åŒ…æ–¹å¼ï¼Œé»˜è®¤jarï¼‰

ç½‘ä¸ŠjaråŒ…ä¸€èˆ¬éƒ½æä¾›mavené…ç½®ä¿¡æ¯ï¼Œæ¯”å¦‚`mysql-connector-java`çš„åæ ‡ â¬‡ï¸

```xml
<!-- https://mvnrepository.com/artifact/mysql/mysql-connector-java -->
<dependency>
    <groupId>mysql</groupId>
    <artifactId>mysql-connector-java</artifactId>
    <version>8.0.23</version>
  	<packaging>jar</packaging>
</dependency>
```

## pom.xml

> Apacheç»„ç»‡åœ¨ç»´æŠ¤mavenå·¥å…·ï¼š https://maven.apache.org/download.cgi
> ä¸€èˆ¬ IDEA ç¼–è¾‘å™¨å·²ç»å†…ç½®æ†ç»‘äº†ã€‚

mavené¡¹ç›®ä¸‹ä¼šæœ‰ä¸€ä¸ªæ–‡ä»¶å« `pom.xml` é…ç½®æ–‡ä»¶

```xml
<?xml version="1.0" encoding="UTF-8"?>
<project xmlns="http://maven.apache.org/POM/4.0.0"
         xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
         xsi:schemaLocation="http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd">
    <modelVersion>4.0.0</modelVersion>

    <groupId>org.example</groupId>
    <artifactId>TestMaven</artifactId>
    <version>1.0-SNAPSHOT</version>

    <properties>
        <maven.compiler.source>22</maven.compiler.source>
        <maven.compiler.target>22</maven.compiler.target>
        <project.build.sourceEncoding>UTF-8</project.build.sourceEncoding>
    </properties>

</project>
```

# æ¡†æ¶

## æ¡†æ¶çš„æ„ä¹‰

- é‡å¤/åŸºç¡€ä»£ç å°è£…ï¼ŒåŒæ—¶æ·»åŠ é¢å¤–åŠŸèƒ½
- é‡Šæ”¾ç¨‹åºå‘˜å†™ä»£ç ç²¾åŠ›ï¼Œæ›´å…³æ³¨ä¸šåŠ¡å±‚é¢
- æ¡†æ¶æ˜¯åŠæˆå“

# MyBatis æ¡†æ¶

> https://wiki.dxy.net/pages/viewpage.action?pageId=125832004

## MyBatis æ˜¯æŒä¹…å±‚æ¡†æ¶

å°†**è®¿é—®æ•°æ®æº**çš„ä»£ç å’Œ**ä¸šåŠ¡é€»è¾‘**ä»£ç åˆ†ç¦»

åœ¨`properties`æ–‡ä»¶ä¸­å®Œæˆæ•°æ®åº“è¿æ¥å’Œmybaitsé…ç½®ï¼š

```bash
# æ•°æ®åº“
spring.datasource.url=${MYSQL_DB_HOST:jdbc:mysql://192.168.202.206}:${MYSQL_DB_PORT:3306}/${MYSQL_DB_NAME:spider_system}?characterEncoding=utf8&useSSL=true
spring.datasource.username=${MYSQL_DB_USERNAME:XXXXX}
spring.datasource.password=${MYSQL_DB_PASSWORD:XXXXXX}
spring.datasource.driverClassName=com.mysql.jdbc.Driver
# mybatis_config
mybatis.mapperLocations=classpath:com/dxy/data/spider/admin/mapper/*.xml
mybatis.typeAliasesPackage=com.dxy.data.spider.admin.entity
```

å…¥å£æ–‡ä»¶ä½¿ç”¨æ³¨è§£å®ŒæˆåŒ…æ‰«æå’Œç»„ä»¶æ‰«æï¼š

```java
@MapperScan(basePackages = "com.dxy.data.spider.admin.mapper")
@ComponentScan("com.dxy.data.spider")
```



## MyBatis æ˜¯ORMæ¡†æ¶

å°†**æ•°æ®åº“æŸ¥è¯¢åˆ°çš„æ•°æ®**è‡ªåŠ¨å’Œç¨‹åºé‡Œçš„**å¯¹è±¡**åšä¸€ä¸ª**æ˜ å°„**

å¸¸ç”¨æ³¨è§£ï¼š 

- **`@TableName`**ï¼š æ˜ å°„æ•°æ®è¡¨å 
- **`@TableId(value = "id", type = IdType.AUTO)`**ï¼šè‡ªå¢ä¸»é”® 
- **`@TableField(value = "create_time")`**ï¼šä¸€èˆ¬å­—æ®µï¼ˆå½“å­—æ®µå’Œå±æ€§åä¸€è‡´æ—¶é»˜è®¤åŒ¹é…ï¼‰ 
- å¸¸ç”¨çš„set/getæ–¹æ³•

mapperæ˜ å°„ï¼š

```java
public interface SiteRuleMapper extends BaseMapper<SiteRule> {}
```

# Spring æ¡†æ¶

> https://spring.io/

Core Container

- Beans
- Core
- Context
- SpEL

## æ§åˆ¶åè½¬ï¼ˆIoC/DIï¼‰

> æ§åˆ¶åè½¬ IoC(Inversion of Control)ï¼Œä¹Ÿè¢«ç§°ä¸º DI(dependency injection)ã€‚
> **å°†åˆ›å»ºå¯¹è±¡çš„æƒåˆ©äº¤ç»™springå®¹å™¨æ¥æ§åˆ¶ï¼Œå°±æ˜¯æ§åˆ¶åè½¬**

### å±æ€§æ³¨å…¥(åŸºç¡€ç±»å‹)

ä»¥å‰ - setteræ–¹å¼

```java
Book b = new Book();
b.setId(1);
b.setName("xxx");
```

å±æ€§æ³¨å…¥ - è®¾å€¼æ³¨å…¥

```xml
<bean id="s" class="com.example.Student">
  <property name="id" value="1"></property>
  <property name="name" value="æå"></property>
</bean>
```

ä»¥å‰ - æ„é€ å™¨æ–¹å¼

```java
Book b = new Book(1, "xxx");
```

å±æ€§æ³¨å…¥ - æ„é€ æ³¨å…¥

```xml
<bean id="s" class="com.example.Student">
  <constructor-arg name="id" value="1"></constructor-arg>
  <constructor-arg name="name" value="æå"></constructor-arg>
</bean>
```

> ğŸŒŸ **è®¾å€¼æ³¨å…¥ **ä¼˜å…ˆçº§é«˜äº **æ„é€ æ³¨å…¥** ğŸŒŸ

### å±æ€§æ³¨å…¥(å¼•ç”¨ç±»å‹)

å±æ€§ä¸ºå¼•ç”¨ç±»å‹ ğŸš© - ä»¥å‰

```java
Teacher t = new Teacher(1, "sir");
Student s = new Student(1, "æå", t);
```

å±æ€§æ³¨å…¥ - ref

```xml
<bean id="teacher" class="org.example.Teacher">
    <constructor-arg name="id" value="1"></constructor-arg>
    <constructor-arg name="name" value="sir"></constructor-arg>
</bean>
<bean id="s2" class="org.example.Student">
    <constructor-arg name="id" value="1"></constructor-arg>
    <constructor-arg name="name" value="æå"></constructor-arg>
  	<!-- ref å¯»æ‰¾ id=ref å€¼çš„ bean -->
    <constructor-arg name="teacher" ref="teacher"></constructor-arg>
</bean>
```



### æ³¨è§£

> åœ¨åŸæœ‰æ–‡ä»¶ä¸æ”¹å˜çš„æƒ…å†µä¸‹ï¼ŒåµŒå…¥ä¸€äº›è¡¥å……ä¿¡æ¯ã€‚ğŸš©**æ³¨è§£çš„ç›®çš„æ˜¯ä½¿æˆ‘ä»¬çš„é…ç½®æ–‡ä»¶ï¼ˆxmlï¼‰æ›´ç®€å•**ğŸš©

- **@Component** 
  å®ä¾‹åŒ–Beanï¼Œé»˜è®¤åç§°ä¸ºç±»å é¦–å­—æ¯å˜å°å†™ï¼Œæ— éœ€æŒ‡å®šsetteræ–¹æ³•
- **@Repository**
  ä½œç”¨å’Œ@Componentä¸€æ ·ï¼Œç”¨åœ¨æŒä¹…å±‚ã€‚**è¯­ä¹‰åŒ–è€Œå·²**
- **@Service**
  ä½œç”¨å’Œ@Componentä¸€æ ·ï¼Œç”¨åœ¨ä¸šåŠ¡å±‚
- **@Controller**
  ä½œç”¨å’Œ@Componentä¸€æ ·ï¼Œç”¨åœ¨æ§åˆ¶å™¨å±‚
- **@Configuration**
  ä½œç”¨å’Œ@Componentä¸€æ ·ï¼Œç”¨åœ¨é…ç½®ç±»ä¸Š
- **@Autowired**
  æŠŠå®¹å™¨ä¸­çš„**å¯¹è±¡**è‡ªåŠ¨æ³¨å…¥ï¼Œå¹¶ä¸”ä¸éœ€è¦ä¾èµ–setæ–¹æ³•ã€‚é»˜è®¤byTypeï¼Œå¦‚æœå¤šä¸ªåŒç±»å‹beanï¼Œä½¿ç”¨byName
- **@Value**
  ç»™æ™®é€šæ•°æ®ç±»å‹ï¼ˆ**å…«ç§åŸºæœ¬ç±»å‹ + String**ï¼‰å±æ€§èµ‹å€¼ï¼Œå¹¶ä¸”ä¸éœ€è¦ä¾èµ–setæ–¹æ³•

```java
@Component
public class Teacher {
  @Value("1")
  private int id;
  
  @Value("é™ˆ")
  private String name; 
  
  @Autowired
  private Student student;
  
  // ä¸éœ€è¦ä¾èµ–setæ–¹æ³•äº†
  // public void setId(int id){
  //  this.id = id;
  // }
}
```



## AOPåˆ‡é¢ç¼–ç¨‹

**1.ä¼ ç»Ÿé¢å‘å¯¹è±¡** â¬‡ï¸

å‰ç«¯  <=>                   javaç¨‹åº                            <=>  æ•°æ®åº“
å‰ç«¯ <=> æ§åˆ¶å±‚ <=> ä¸šåŠ¡å±‚ <=> æ•°æ®åº“è¿æ¥å±‚ <=> æ•°æ®åº“

- æ§åˆ¶å±‚ **BookController** ï¼šè·å–å‰ç«¯æ•°æ®ï¼Œè¿›è¡Œé¡µé¢çš„è·³è½¬ï¼Œè°ƒç”¨new Service()
- ä¸šåŠ¡å±‚ **BookService**ï¼šå¤„ç†ä¸šåŠ¡ï¼Œè°ƒç”¨new Mapper()
- æ•°æ®åº“è¿æ¥å±‚ **BookMapper** ï¼šæ•°æ®åº“äº¤äº’ï¼ˆå¢åˆ æ”¹æŸ¥ï¼‰

**2.é¢å‘æ¥å£å®ç°ç±»ç¼–ç¨‹** â¬‡ï¸

Impl æ¥å£å®ç°ç±»ï¼ˆé¢å‘æ¥å£ï¼‰
å‰ç«¯  <=> BookController | new BookControllerImpl()  <=>  BookService | BookServiceImpl  <=>  BookMapper | BookMapperImpl  <=>  æ•°æ®åº“

**3.Springä¸å†åˆ›å»ºå¯¹è±¡ â¬‡ï¸**

applicationcontext.xml é…ç½®æ–‡ä»¶
é€šè¿‡beanï¼ŒSpringå°±ä¼šå¸®æˆ‘æ„å»ºä¸€ä¸ª Student s = new Student( ) çš„åå°„

```xml
<bean id="s" class="student"></bean>
<bean id="t" class="teacher"></bean>
```

Springå®¹å™¨ - æ”¾å„ç§å¯¹è±¡ studentã€tã€...

javaç¨‹åºä»Springå®¹å™¨ä¸­å–å¯¹è±¡



## æ¡†æ¶çš„æ¡†æ¶ï¼ˆæ•´åˆï¼‰

- **ä¸å†é‡å¤é€ è½®å­**

- SSM
  springã€spring mvcã€mybatis

  

# Tomcat æœåŠ¡å™¨ï¼ˆwebé¡¹ç›®ï¼‰

é¡¹ç›®ç»“æ„

1. Mavenæ„å»ºé¡¹ç›®ç±»å‹ï¼š

   - Javaé¡¹ç›® --> **jar** é¡¹ç›®
   - Webé¡¹ç›® --> **war** é¡¹ç›®

2. åˆ›å»ºMaven-waré¡¹ç›®æ­¥éª¤ï¼š

   1. åˆ›å»ºMavené¡¹ç›®ï¼Œæ·»åŠ webappæ¨¡ç‰ˆ
      å…ˆå‹¾é€‰**create from archetype**å‰é¢çš„å¤é€‰æ¡†
      ç„¶åé€‰æ‹©org.apache.maven.archetypes:maven-archetype-webapp
   2. æ³¨æ„ pom.xmlä¸­æ˜¯waré¡¹ç›®
   3. è§‚å¯Ÿç›®å½•ç»“æ„ä¸jaré¡¹ç›®ä¸åŒä¹‹å¤„
   4. è®¾ç½®javaç›®å½•ä¸ºèµ„æºç›®å½•
   5. æ·»åŠ tomcat
   6. å°†é¡¹ç›®æ·»åŠ åˆ°tomcatä¸­

   

# Spring MVCï¼ˆå‰åç«¯æ•°æ®äº¤äº’ï¼‰

## Controller æ§åˆ¶å±‚ï¼ˆapiï¼‰

æ¥å—å‰ç«¯çš„è¯·æ±‚

- @Controller é…ç½®ç±»
- @RequestMapping("/apiname") æ¥å£åï¼Œè·å–æ™®é€šå‚æ•°
- è¯¾å¤–é¢˜ï¼šè·å–éStringç±»å‹å‚æ•°ï¼Œå¦‚Dateã€ArrayListä¹‹ç±»çš„â“

```java
import org.springframework.stereotype.Controller;
import org.springframework.web.bind.annotation.RequestMapping;

@Controller
public class TestController { // æ§åˆ¶å™¨ç±»
    @RequestMapping("/test1")
    public String test1(){
        // å“åº”ç»™æµè§ˆå™¨index.jspé¡µé¢
        return "index.jsp";
    }


    @RequestMapping("/list")
    public String list(String pageSize){
        System.out.println("pageSize="+pageSize);
        return "index.jsp";
    }
}

// tomactåº”ç”¨
// http://localhost:8886/testwebapp/test1
// http://localhost:8886/testwebapp/list?pageSize=10
```

# SSM (SpringMVC + Spring + MyBatis)

Javaé€Ÿæˆç­è¯¾ä»¶
é“¾æ¥ï¼šhttps://pan.baidu.com/s/1ElaXjXwC9FU-ikODiel1Wg?pwd=k24y 
æå–ç ï¼šk24y

> å‰ç«¯ <=> æ§åˆ¶å±‚ <=>  ä¸šåŠ¡å±‚ <=> æ•°æ®åº“è¿æ¥å±‚ <=> æ•°æ®åº“

| å‰ç«¯ <=  |                   => æ§åˆ¶å±‚<=                    |                         => ä¸šåŠ¡å±‚ <=                         |           => æ•°æ®åº“è¿æ¥å±‚ <=<br />ä¹Ÿç§° **æŒä¹…å±‚**            | => æ•°æ®åº“ |
| :------: | :----------------------------------------------: | :----------------------------------------------------------: | :----------------------------------------------------------: | :-------: |
|          | è·å–å‰ç«¯æ•°æ®<br />è¿›è¡Œé¡µé¢çš„è·³è½¬<br />è°ƒç”¨ä¸šåŠ¡å±‚ |                å¤„ç†ä¸šåŠ¡<br />è°ƒç”¨æ•°æ®åº“è¿æ¥å±‚                |                è·Ÿæ•°æ®åº“è¿›è¡Œäº¤äº’<br />å¢åˆ æ”¹æŸ¥                |           |
|  *ä»£ç *  |                  BookController                  |                         BookService                          |                          BookMapper                          |           |
|  *ç»“æ„*  |       BookService2 b = new BoolService2()        |                   BookServiceImplæ¥å£æ‹“å±•                    |                                                              |           |
| é…ç½®æ–‡ä»¶ |                                                  | `springmvc.xml`<br />ï¼ˆè®©`Controller`æ–‡ä»¶å¤¹å’Œ`@RequestMapping`æ³¨è§£ç”Ÿæ•ˆï¼‰ | `myBatis.xml`ï¼ˆç™»é™†æ•°æ®åº“ï¼‰<br />`BookMapper.xml` (å†™æ•°æ®åº“è¯­è¨€) |           |

- å®ä½“ç±» pojo(Plain Old Java Object)

  ```java
  // com.msb.pojo
  public class Book {
      private int id;
      private String name;
  
      public int getId() {
          return id;
      }
  
      public void setId(int id) {
          this.id = id;
      }
  
      public String getName() {
          return name;
      }
  
      public void setName(String name) {
          this.name = name;
      }
  }
  ```

- æ§åˆ¶å±‚ Controller

  ```java
  // com.msb.controller
  @Controller
  public class BookController {
    @Autowired
    private BookService bookService;
    
    @RequestMapping("/api/findAll")
  + @ResponseBody
    public String findAll(){
      List list = bookService.findAll();
      return "index.jsp";
    }
  }
  ```

  > @Autowired æŠŠä¸šåŠ¡å±‚çš„å®¹å™¨å¯¹è±¡æ³¨å…¥è¿›æ¥ï¼Œæ–¹ä¾¿è°ƒç”¨ã€‚
  > @RequestMapping å®šä¹‰æ¥å£åï¼Œä¾›å‰ç«¯è°ƒç”¨
  > @ResponseBody è¿”å›å€¼è®¾ç½®åˆ°httpå“åº”æµä¸­

- ä¸šåŠ¡å±‚ Service
  ```java
  // com.msb.service
  public interface BookService {
    public abstract List findAll();
  }
  ```

  Service Impl æ¥å£å®ç°ç±»ï¼ˆé¢å‘æ¥å£ï¼‰
  ```java
  // com.msb.service.impl
  @Service
  public class BookServiceImpl implements BookService {
      @Autowired
      private BookMapper bookMapper;
  
      public List findAll() {
          return bookMapper.selectAll();
      }
  }
  ```

- æ•°æ®åº“è¿æ¥å±‚ï¼ˆæŒä¹…å±‚ï¼‰ Mapper
  ```java
  // com.msb.mapper
  @Repository
  public interface BookMapper {
      public abstract List selectAll();
  }
  ```

# SpringBoot

> æ ¸å¿ƒæ€æƒ³ï¼šçº¦å®šå¤§äºé…ç½®ã€‚
> SSMéœ€è¦åšå¤§é‡çš„é…ç½®ï¼ŒSpringBootå¯ä»¥åšåˆ°é›¶é…ç½®ã€‚ï¼ˆæ§åˆ¶ç±» + **å¯åŠ¨ç±»**ï¼‰

- æ§åˆ¶ç±»

  åŒSSM

- **å¯åŠ¨ç±»**

  ```java
  @SpringBootApplication
  // æ‰«æmapperæ–‡ä»¶(å¦‚æœç”¨mybatisçš„è¯)
  @MapperScan("com.msb.mapper")
  // å‘½åè§„åˆ™ï¼šåŒ…å+Application
  public class TestSpringBootApplication {
    // åŸºäºmainæ–¹æ³•å¯åŠ¨
    public static void main(String[] args) {
      // åªä¼šæ‰«æå®ƒçš„è·¯å¾„ä¹‹ä¸‹çš„å­åŒ…; æ‰€ä»¥controllerè¦å’Œå®ƒå¹³çº§æ•ˆç‡ä¸ºæœ€é«˜ã€‚
      SpringApplication.run(TestSpringBootApplication.class,args);
    }
  }
  ```

- é…ç½®æ–‡ä»¶ `source/application.yml`

  ```properties
  server:
    port: 9999
    servlet:
      context-path: /spring02
  spring:
    datasource:
      url: jdbc:mysql://localhost:3306/msb
      driver-class-name: com.mysql.cj.jdbc.Driver
      username: root
      password: 12345678
      
  #mybatisé…ç½® (resource/mybatis/BookMapper.xml)
  mybatis:
    type-aliases-package: com.msb.pojo
    mapper-locations: classpath: mybatis/*.xml
  ```

- æŒä¹…å±‚
  åŒSSM



# Spring Data JPA é¡¹ç›®ç»“æ„

- domain
  åŒ pojo

  ```java
  @Entity
  public class User {
      @Id
      @GeneratedValue(strategy = GenerationType.IDENTITY)
      private Long id;
      
      private String name;
      private String email;
  
      // getters and setters
  }
  ```

  

- dao (Data Access Object)

  åŒ mapper
  ```java
  import org.springframework.data.jpa.repository.JpaRepository;
  
  public interface UserRepository extends JpaRepository<User, Long> {
      List<User> findByName(String name);
  }
  ```

  

- web
  åŒ controller

